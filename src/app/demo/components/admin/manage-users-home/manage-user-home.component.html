<div class="card">
    <div class="spinner-container" *ngIf="loading">
        <p-progressSpinner ariaLabel="loading" />
    </div>
    <div class="flex flex-column md:flex-row md:justify-content-between gap-2">
        <!-- <span class="p-input-icon-left">
            <i class="pi pi-search"></i>
            <input type="search" pInputText placeholder="Search by Name" (input)="onInput($event.target.value)">
        </span> -->
        <h5>All Users</h5>


    </div>
    <br>

    <div>

        <div class="cart-item">

            <p-table [value]="users" [paginator]="true" [rows]="20" responsiveLayout="scroll">
                <ng-template pTemplate="header">
                    <tr>
                        <th>User Name</th>
                        <th>Email</th>
                        <th>FirstName</th>
                        <th>LastName</th>
                        <th>Admin</th>
                        <th>Delete</th>
                        <th>Edit</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-product>
                    <tr>
                        <td>{{product.username}}</td>
                        <td>{{product.email}}</td>
                        <td>{{product.firstName}}</td>
                        <td>{{product.lastName}}</td>
                        <td>{{product.isAdmin}}</td>
                        <td><p-toast />
                            <p-confirmPopup />
                            <button pButton pRipple type="button" icon="pi pi-trash"
                                class="p-button p-component p-button-text p-button-icon-only"
                                (click)="confirm2($event,product.id)"></button>

                        <td style="width: 15%;">
                            <button pButton pRipple type="button" icon="pi pi-file-edit"
                                class="p-button p-component p-button-text p-button-icon-only"
                                (click)="userInfo(product.id)"></button>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>
</div>


<p-dialog header="Edit Profile" [modal]="true" [(visible)]="visible" [style]="{ width: '25rem' }">
    <span class="p-text-secondary block mb-5">Update your information.</span>
    <div class="flex align-items-center gap-3 mb-3">
        <label for="username" class="font-semibold w-6rem">Username</label>
        <input  pInputText id="username" class="flex-auto" autocomplete="off"  disabled [(ngModel)]="user.username"/>
    </div>
    <div class="flex align-items-center gap-3 mb-5">
        <label for="email" class="font-semibold w-6rem">Email</label>
        <input pInputText id="email" class="flex-auto" autocomplete="off" [(ngModel)]="user.email"/>
    </div>

    <div class="flex align-items-center gap-3 mb-5">
        <label for="email" class="font-semibold w-6rem">First Name</label>
        <input pInputText id="email" class="flex-auto" autocomplete="off" [(ngModel)]="user.firstName"/>
    </div>

    <div class="flex align-items-center gap-3 mb-5">
        <label for="email" class="font-semibold w-6rem">Last Name</label>
        <input pInputText id="email" class="flex-auto" autocomplete="off" [(ngModel)]="user.lastName"/>
    </div>
    <div class="flex align-items-center gap-3 mb-5">
        <label for="email" class="font-semibold w-6rem">Admin</label>
        <p-inputSwitch [(ngModel)]="user.isAdmin"></p-inputSwitch>
        
    </div>

    
    <div class="flex justify-content-end gap-2">
        <p-button label="Cancel" severity="secondary" (click)="visible = false" />
        <p-button label="Save" (click)="updateUser()" />
    </div>
</p-dialog>